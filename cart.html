<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mon Panier</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="bg-light">
  <div class="container my-5">
    <h1 class="text-center mb-4">üõçÔ∏è Votre panier</h1>

    <div class="table-responsive">
      <table class="table table-bordered align-middle text-center">
        <thead class="table-dark">
          <tr>
            <th>Produit</th>
            <th>Prix</th>
            <th>Quantit√©</th>
            <th>Total</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="cart-body">
          <!-- Les articles du panier s‚Äôafficheront ici -->
        </tbody>
      </table>
    </div>

    <div class="text-end mt-3">
      <h3>Total g√©n√©ral : <span id="grand-total">0</span> ‚Ç¨</h3>
      <button id="btn-clear" class="btn btn-danger mt-3">Vider le panier</button>
      <button id="btn-pay" class="btn btn-success mt-3">Simuler le paiement</button>
    </div>
  </div>

<script >
    // R√©cup√©rer le panier depuis localStorage
          let cart = JSON.parse(localStorage.getItem("cart")) || [];

          const cartBody = document.getElementById("cart-body");
          const grandTotalEl = document.getElementById("grand-total");

          // Fonction pour afficher le panier
          function displayCart() {
              cartBody.innerHTML = "";
              let grandTotal = 0;

              cart.forEach((item, index) => {
              const total = item.price * item.quantity;
              grandTotal += total;

              const row = document.createElement("tr");
              row.innerHTML = `
                <td><img src="${item.image}" alt="${item.name}" width="60" /> <br> ${item.name}</td>
                <td>${item.price} ‚Ç¨</td>
                <td>
                  <input type="number" min="1" value="${item.quantity}" class="form-control quantity-input" data-index="${index}">
                </td>
                <td>${total.toFixed(2)} ‚Ç¨</td>
                <td>
                  <button class="btn btn-sm btn-danger btn-remove" data-index="${index}">Supprimer</button>
                </td>
              `;
              cartBody.appendChild(row);
              });

              grandTotalEl.textContent = grandTotal.toFixed(2);

              attachEvents(); // relier les inputs et boutons
          }

          // Mettre √† jour la quantit√©
          function attachEvents() {
              document.querySelectorAll(".quantity-input").forEach(input => {
                  input.addEventListener("change", e => {
                    const idx = e.target.dataset.index;
                    let qty = parseInt(e.target.value);
                    if (qty < 1) qty = 1;
                    cart[idx].quantity = qty;
                    localStorage.setItem("cart", JSON.stringify(cart));
                    displayCart();
                  });
              });
x
              document.querySelectorAll(".btn-remove").forEach(btn => {
                    btn.addEventListener("click", e => {
                      const idx = e.target.dataset.index;
                      cart.splice(idx, 1);
                      localStorage.setItem("cart", JSON.stringify(cart));
                      displayCart();
                    });
              });
          }

          // Vider le panier
          document.getElementById("btn-clear").addEventListener("click", () => {
          cart = [];
          localStorage.removeItem("cart");
          displayCart();
          });

          // Simuler le paiement
          document.getElementById("btn-pay").addEventListener("click", () => {
          if(cart.length === 0){
          alert("Votre panier est vide üò¢");
          return;
          }
          alert(`Merci pour votre achat ! Total pay√© : ${grandTotalEl.textContent} ‚Ç¨`);
          cart = [];
          localStorage.removeItem("cart");
          displayCart();
          });

// Affichage initial
  displayCart();

  </script>
</body>
</html>
